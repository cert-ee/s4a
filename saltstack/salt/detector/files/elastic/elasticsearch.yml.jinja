{% set multiviewer_enabled = salt['cmd.run'](cmd='grep -i MULTIVIEWER_ENABLED=True /etc/default/s4a-detector|cut -d= -f2', python_shell=True) %}
cluster.name: {{ salt['grains.get']('host', 'elastic') }}
node.name: "{{ salt['grains.get']('host', 'node1') }}"
node.data: true
path.data: /srv/elasticsearch
path.logs: /var/log/elasticsearch
{% if multiviewer_enabled == "True" or multiviewer_enabled == "true" %}
network.host: 0.0.0.0
{% else %}
network.host: _local_
{% endif %}
bootstrap.memory_lock: true
http.port: 9200
transport.host: localhost
transport.tcp.port: 9300

gateway.expected_nodes: 1
gateway.recover_after_data_nodes: 1

discovery.zen.minimum_master_nodes: 1

indices.breaker.fielddata.limit: 70%

cluster.routing.allocation.disk.threshold_enabled: true
cluster.routing.allocation.disk.watermark.low: 10gb
cluster.routing.allocation.disk.watermark.high: 5gb
cluster.routing.allocation.disk.watermark.flood_stage: 2gb
cluster.info.update.interval: 1m

xpack.security.enabled: false
